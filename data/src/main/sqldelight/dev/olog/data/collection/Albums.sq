selectAll:
SELECT * FROM albums_view;

selectAllSorted:
SELECT * FROM sorted_albums_view;

selectById:
SELECT * FROM albums_view WHERE id = ?;

selectArtistAlbums:
SELECT *
FROM albums_view
WHERE author_id = ?
ORDER BY lower(title) COLLATE LOCALIZED ASC;

selectTracksByIdSorted:
SELECT songs_view.*
FROM songs_view
    LEFT JOIN sort ON TRUE
WHERE collection_id = ? AND sort.table_name = 'albums_songs'
ORDER BY
-- author, then title
CASE WHEN sort.column_name = 'author' AND author = '<unknown>' THEN -1 END, -- when unknown move last TODO test performance
CASE WHEN sort.column_name = 'author' AND sort.direction = 'asc' THEN lower(author) END COLLATE LOCALIZED ASC,
CASE WHEN sort.column_name = 'author' AND sort.direction = 'desc' THEN lower(author) END COLLATE LOCALIZED DESC,
-- album artist, then title
CASE WHEN sort.column_name = 'album_artist' AND album_artist = '<unknown>' THEN -1 END, -- when unknown move last TODO test performance
CASE WHEN sort.column_name = 'album_artist' AND sort.direction = 'asc' THEN lower(album_artist) END COLLATE LOCALIZED ASC,
CASE WHEN sort.column_name = 'album_artist' AND sort.direction = 'desc' THEN lower(album_artist) END COLLATE LOCALIZED DESC,
-- duration, then title
CASE WHEN sort.column_name = 'duration' AND sort.direction = 'asc' THEN duration END ASC,
CASE WHEN sort.column_name = 'duration' AND sort.direction = 'desc' THEN duration END DESC,
-- date added, then title
CASE WHEN sort.column_name = 'date_added' AND sort.direction = 'asc' THEN date_added END DESC,
CASE WHEN sort.column_name = 'date_added' AND sort.direction = 'desc' THEN date_added END ASC,
-- disc number, track number, then title
CASE WHEN sort.column_name = 'track_number' AND sort.direction = 'asc' THEN disc_number END ASC,
CASE WHEN sort.column_name = 'track_number' AND sort.direction = 'asc' THEN track_number END ASC,
CASE WHEN sort.column_name = 'track_number' AND sort.direction = 'desc' THEN disc_number END DESC,
CASE WHEN sort.column_name = 'track_number' AND sort.direction = 'desc' THEN track_number END DESC,

-- default, and second sort
-- also, CASE WHEN sort.column_name = 'title' AND sort.direction = 'asc'
CASE WHEN sort.direction = 'asc' THEN lower(title) END COLLATE LOCALIZED ASC,
CASE WHEN sort.direction = 'desc' THEN lower(title) END COLLATE LOCALIZED DESC;

selectRecentlyAdded:
SELECT *
FROM albums_view
WHERE strftime('%s','now') - date_added < 1209600 -- two weeks in seconds, keep in sync with others
ORDER BY date_added DESC;

selectRecentlyPlayed:
SELECT albums_view.*
FROM albums_view JOIN recently_played_albums
    ON albums_view.id = recently_played_albums.id
ORDER BY recently_played_albums.date_played DESC
LIMIT 10; -- keep in sync with others

insertRecentlyPlayed:
REPLACE INTO recently_played_albums VALUES (?, ?);